"use strict";(self.webpackChunkreact_tps_storage=self.webpackChunkreact_tps_storage||[]).push([[557],{64:(e,l,o)=>{o.d(l,{Z:()=>n});var t=o(791),i=o(184);const n=e=>{var l,o,n,a,r,d,s;let c=[];for(let t=1;t<=(null===e||void 0===e||null===(u=e.meta)||void 0===u?void 0:u.last_page);t++){var u;c.push(t)}const[v,p]=(0,t.useState)((null===e||void 0===e||null===(l=e.meta)||void 0===l?void 0:l.current_page)||1);return(0,t.useEffect)((()=>{null===e||void 0===e||e.onChange(v)}),[v]),(0,i.jsx)("div",{className:"auto_container",children:(0,i.jsx)("div",{className:"w-full mt-[20px] flex items-center justify-center",children:(0,i.jsxs)("ul",{className:"flex items-center border-[1px] border-solid border-[#EBEBEB] rounded-[5px]",children:[(0,i.jsx)("li",{className:"block",children:(0,i.jsx)("div",{onClick:()=>{v>1&&p(v-1)},className:"flex items-center justify-center hover:bg-[#EBEBEB] cursor-pointer w-[38px] h-[38px]",children:(0,i.jsx)("svg",{className:"block w-full  object-contain",width:"5",height:"8",viewBox:"0 0 5 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"M2.20003 4.00001L4.80003 6.60001C4.92225 6.72223 4.98337 6.87779 4.98337 7.06667C4.98337 7.25556 4.92225 7.41112 4.80003 7.53334C4.67781 7.65556 4.52225 7.71667 4.33337 7.71667C4.14448 7.71667 3.98892 7.65556 3.8667 7.53334L0.800032 4.46667C0.733366 4.40001 0.686255 4.32779 0.658699 4.25001C0.631143 4.17223 0.617144 4.0889 0.616699 4.00001C0.616699 3.91112 0.630699 3.82778 0.658699 3.75001C0.686699 3.67223 0.73381 3.60001 0.800032 3.53334L3.8667 0.466674C3.98892 0.344451 4.14448 0.28334 4.33337 0.28334C4.52225 0.28334 4.67781 0.344451 4.80003 0.466674C4.92225 0.588896 4.98337 0.744452 4.98337 0.93334C4.98337 1.12223 4.92225 1.27779 4.80003 1.40001L2.20003 4.00001Z",fill:"#1A1A1A"})})})}),(0,i.jsx)("li",{className:"block",children:(0,i.jsx)("div",{onClick:()=>p(1),className:"".concat(1==v&&"bg-red-600 text-white "," flex items-center justify-center hover:bg-[#EBEBEB] cursor-pointer w-[38px] h-[38px]"),children:"1"})}),v>3&&(null===e||void 0===e||null===(o=e.meta)||void 0===o?void 0:o.last_page)>=5&&(0,i.jsx)("li",{className:"block",children:(0,i.jsx)("div",{className:"flex items-center justify-center hover:bg-[#EBEBEB] cursor-pointer w-[38px] h-[38px]",children:"..."})}),null===c||void 0===c?void 0:c.map(((l,o)=>{var t;return 1!=l&&l!=(null===e||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.last_page)&&(Math.abs(v-l)<=2&&0!=Math.abs(v-l)||v==l)&&(0,i.jsx)("li",{className:"block",children:(0,i.jsx)("div",{onClick:()=>p(l),className:"".concat(v==l&&"bg-red-600 text-white "," flex items-center justify-center hover:bg-[#EBEBEB] text-black cursor-pointer w-[38px] h-[38px]"),children:l})},"pages"+o)})),(null===e||void 0===e||null===(n=e.meta)||void 0===n?void 0:n.last_page)-v>3&&(null===e||void 0===e||null===(a=e.meta)||void 0===a?void 0:a.last_page)>=5&&(0,i.jsx)("li",{className:"block",children:(0,i.jsx)("div",{className:"flex items-center justify-center hover:bg-[#EBEBEB] cursor-pointer w-[38px] h-[38px]",children:"..."})}),1!=(null===e||void 0===e||null===(r=e.meta)||void 0===r?void 0:r.last_page)&&(0,i.jsx)("li",{className:"block",children:(0,i.jsx)("div",{onClick:()=>{var l;return p(null===e||void 0===e||null===(l=e.meta)||void 0===l?void 0:l.last_page)},className:"".concat(v==(null===e||void 0===e||null===(d=e.meta)||void 0===d?void 0:d.last_page)&&"bg-red-600 text-white "," flex items-center justify-center hover:bg-[#EBEBEB] cursor-pointer w-[38px] h-[38px]"),children:null===e||void 0===e||null===(s=e.meta)||void 0===s?void 0:s.last_page})}),(0,i.jsx)("li",{className:"block",children:(0,i.jsx)("div",{onClick:()=>{var l;v<(null===e||void 0===e||null===(l=e.meta)||void 0===l?void 0:l.last_page)&&p(v+1)},className:"flex items-center justify-center hover:bg-[#EBEBEB] cursor-pointer w-[38px] h-[38px]",children:(0,i.jsx)("svg",{className:"block w-full object-contain",width:"5",height:"8",viewBox:"0 0 5 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"M3.40003 4.00001L0.800032 1.40001C0.67781 1.27779 0.616699 1.12223 0.616699 0.93334C0.616699 0.744452 0.67781 0.588896 0.800032 0.466674C0.922255 0.344451 1.07781 0.28334 1.2667 0.28334C1.45559 0.28334 1.61114 0.344451 1.73337 0.466674L4.80003 3.53334C4.8667 3.60001 4.91403 3.67223 4.94203 3.75001C4.97003 3.82778 4.98381 3.91112 4.98337 4.00001C4.98337 4.0889 4.96937 4.17223 4.94137 4.25001C4.91337 4.32779 4.86625 4.40001 4.80003 4.46667L1.73337 7.53334C1.61114 7.65556 1.45559 7.71667 1.2667 7.71667C1.07781 7.71667 0.922255 7.65556 0.800032 7.53334C0.67781 7.41112 0.616699 7.25556 0.616699 7.06667C0.616699 6.87779 0.67781 6.72223 0.800032 6.60001L3.40003 4.00001Z",fill:"#1A1A1A"})})})})]})})})}},557:(e,l,o)=>{o.r(l),o.d(l,{default:()=>p});var t=o(791),i=o(797),n=o(911),a=o(184);const r=e=>{const l=(0,n.k6)(),o=l=>{var o;let t=((null===e||void 0===e?void 0:e.page)-1)*(null===e||void 0===e?void 0:e.limit)+1;return null===e||void 0===e||null===(o=e.data)||void 0===o||o.map(((o,i)=>{o.Oid==l.row.Oid&&(t=((null===e||void 0===e?void 0:e.page)-1)*(null===e||void 0===e?void 0:e.limit)+i)})),t+1},t=[{field:"Oid",headerName:"\u2116",width:70,sortable:!1,renderCell:e=>(0,a.jsx)("div",{children:o(e)})},{field:"Code",headerName:"\u0411\u0440\u0438\u0444",flex:1,sortable:!1},{field:"Employee",headerName:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440",flex:1,sortable:!1,renderCell:e=>{var l,o,t,i;return(0,a.jsx)("div",{children:(null===e||void 0===e||null===(l=e.row)||void 0===l||null===(o=l.Employee)||void 0===o?void 0:o.FirstName)+" "+(null===e||void 0===e||null===(t=e.row)||void 0===t||null===(i=t.Employee)||void 0===i?void 0:i.LastName)})}},{field:"Brand",headerName:"\u0411\u0440\u0435\u043d\u0434",flex:1,sortable:!1,renderCell:e=>{var l;return null===e||void 0===e||null===(l=e.Brand)||void 0===l?void 0:l.name}},{field:"\u041a\u0442\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u043b",headerName:"\u041a\u0442\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u043b",flex:1,sortable:!1,renderCell:e=>{var l,o;return(0,a.jsx)("div",{children:null===e||void 0===e||null===(l=e.row)||void 0===l||null===(o=l.Customer)||void 0===o?void 0:o.Name})}},{field:"OpenedAt",headerName:"\u0414\u0430\u0442\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f",flex:1,sortable:!1,renderCell:e=>{var l,o;return(0,a.jsx)("div",{children:null===e||void 0===e||null===(l=e.row)||void 0===l||null===(o=l.OpenedAt)||void 0===o?void 0:o.slice(0,10)})}},{field:"Responsible",headerName:"\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c",flex:1,sortable:!1,renderCell:e=>{var l,o,t,i,n;return(0,a.jsx)("div",{children:(null===e||void 0===e||null===(l=e.row)||void 0===l?void 0:l.Responsible)&&(null===e||void 0===e||null===(o=e.row)||void 0===o||null===(t=o.Responsible)||void 0===t?void 0:t.FirstName)+" "+(null===e||void 0===e||null===(i=e.row)||void 0===i||null===(n=i.Responsible)||void 0===n?void 0:n.LastName)})}}];return(0,a.jsx)("div",{children:(0,a.jsx)(i._$,{onRowClick:(e,o,t)=>{var i,n;console.log(null===(i=e.row)||void 0===i?void 0:i.Oid),l.push({pathname:"/briefDetails/"+(null===(n=e.row)||void 0===n?void 0:n.Oid)})},rows:e.data,getRowId:e=>e.Oid,columns:t,hideFooter:!0,disableColumnMenu:!0,disableColumnSort:!0,sx:{".MuiDataGrid-cell:focus":{outline:"none"},"& .MuiDataGrid-row:hover":{cursor:"pointer"},".MuiDataGrid-cell:focus-within":{outline:"none"},".MuiDataGrid-columnHeaders":{background:"#F5F5F5"},".MuiDataGrid-columnHeaderTitle":{fontWeight:"bold"},"& .MuiDataGrid-columnHeader:hover":{backgroundColor:"inherit",cursor:"default",outline:"none"},"& .MuiDataGrid-columnHeader:focus-within":{outline:"none"}}})})},d=e=>{var l,o;const[i,n]=(0,t.useState)(!1),[r,d]=(0,t.useState)(null===e||void 0===e?void 0:e.value);console.log(null===e||void 0===e?void 0:e.options),(0,t.useEffect)((()=>{null===e||void 0===e||e.onChange(r)}),[r]);const s=(0,t.useRef)(null);var c;return c=s,(0,t.useEffect)((()=>{function e(e){c.current&&!c.current.contains(e.target)&&n(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[c]),(0,a.jsxs)("div",{ref:s,className:"select-none relative min-w-[190px] max-w-[190px] ",children:[(0,a.jsxs)("div",{onClick:()=>n(!i),className:"rounded-[5px] flex justify-between gap-4 items-center py-[10px] px-[15px] border-[1px] border-solid border-[#EBEBEB] cursor-pointer",children:[(0,a.jsx)("p",{className:"max-w-[190px] LineText",children:null!==e&&void 0!==e&&e.value?null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.map((l=>{if((null===e||void 0===e?void 0:e.value)==(null===l||void 0===l?void 0:l.Oid))return null===l||void 0===l?void 0:l.Name})):null===e||void 0===e?void 0:e.defOpt}),(0,a.jsx)("span",{className:"".concat((i?"-rotate-180":"")+" transition"," "),children:(0,a.jsx)("svg",{width:"8",height:"6",viewBox:"0 0 8 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M3.99987 3.60002L6.59987 1.00002C6.72209 0.877794 6.87765 0.816683 7.06654 0.816683C7.25542 0.816683 7.41098 0.877794 7.5332 1.00002C7.65542 1.12224 7.71654 1.27779 7.71654 1.46668C7.71654 1.65557 7.65542 1.81113 7.5332 1.93335L4.46654 5.00002C4.39987 5.06668 4.32765 5.11379 4.24987 5.14135C4.17209 5.16891 4.08876 5.1829 3.99987 5.18335C3.91098 5.18335 3.82765 5.16935 3.74987 5.14135C3.67209 5.11335 3.59987 5.06624 3.5332 5.00002L0.466536 1.93335C0.344314 1.81113 0.283203 1.65557 0.283203 1.46668C0.283203 1.27779 0.344314 1.12224 0.466536 1.00002C0.588758 0.877795 0.744314 0.816683 0.933203 0.816683C1.12209 0.816683 1.27765 0.877795 1.39987 1.00002L3.99987 3.60002Z",fill:"#1A1A1A"})})})]}),i&&(0,a.jsx)("div",{className:"absolute left-0 top-[100%] bg-white shadow-custom z-[2] border-[1px] border-solid border-[#EBEBEB] w-full overflow-y-auto max-h-72 text-pretty overflow-x-hidden",children:null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.map(((e,l)=>(0,a.jsx)("div",{className:"py-[10px] px-[15px] w-full cursor-pointer hover:bg-[#EBEBEB]",onClick:()=>{d(e),n(!1)},children:null===e||void 0===e?void 0:e.Name},"option"+l)))})]})},s=t.memo(d);var c=o(393),u=o(64),v=o(965);const p=()=>{const[e,l]=(0,t.useState)(!1),[o,i]=(0,t.useState)([]),[n,d]=(0,t.useState)(),[p,x]=(0,t.useState)(10),[m,h]=(0,t.useState)(1),[f,g]=(0,t.useState)(""),[C,b]=(0,t.useState)();let w=[];const j=(new Date).getFullYear();let N=2022;for(;N<=j;)w.push({Name:N,Oid:N}),N=+N+1;const[E,B]=(0,t.useState)({year:{defOpt:"\u0413\u043e\u0434",options:w},client:{defOpt:"\u041a\u043b\u0438\u0435\u043d\u0442",options:[]}}),[y,k]=(0,t.useState)({manager:{defOpt:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440",options:[]}}),[O,S]=(0,t.useState)({year:"",client:"",manager:"",filter:""});(0,t.useEffect)((()=>{console.log(O)}),[O]);(0,t.useEffect)((()=>{A(),_()}),[]),(0,t.useEffect)((()=>{L()}),[m,p]),(0,t.useEffect)((()=>console.log(E)),[E]);const L=()=>{l(!0),c.b.post("/api/briefs?limit="+p+"&page="+m+(null!==O&&void 0!==O&&O.year?"&year="+ +(null===O||void 0===O?void 0:O.year):"")+(null!==O&&void 0!==O&&O.client?"&customer="+(null===O||void 0===O?void 0:O.client):"")+(null!==O&&void 0!==O&&O.manager?"&employee="+(null===O||void 0===O?void 0:O.manager):"")+(0!==f.length?"&code=".concat(f):""),{}).then((e=>{var t,n,a;console.log(null===(t=e.data)||void 0===t?void 0:t.data),l(!1),i(null===(n=e.data)||void 0===n?void 0:n.data),d(null===(a=e.data)||void 0===a?void 0:a.meta),console.log("briefs",o)})).catch((e=>{console.log(e),l(!1)}))},A=()=>{c.b.post("/api/employees",{}).then((async e=>{var l;let o=[];await(null===(l=e.data.data)||void 0===l?void 0:l.map((e=>{let l={Oid:null===e||void 0===e?void 0:e.Oid,Name:(null===e||void 0===e?void 0:e.FirstName)+" "+(null===e||void 0===e?void 0:e.LastName)};o.push(l)})));let t={defOpt:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440",options:o};k({...y,manager:t})})).catch((e=>{console.log(e)}))},_=()=>{c.b.post("/api/customers",{}).then((e=>{let l={defOpt:"\u041a\u043b\u0438\u0435\u043d\u0442",options:e.data.data};B({...E,client:l})})).catch((e=>{console.log(e)}))};return(0,a.jsx)("div",{className:"w-full my-10",children:(0,a.jsx)("div",{className:"auto_container",children:(0,a.jsxs)("div",{className:"bg-white p-10 border-[1px] border-solid border-[#EBEBEB] rounded-[10px]",children:[(0,a.jsx)("h1",{className:"text-[#1A1A1A] font-[500] text-[36px] text-left",children:"\u0411\u0440\u0438\u0444\u044b"}),(0,a.jsxs)("div",{className:"w-full my-10 rounded-[10px] border-[1px] border-[#808080] shadow-md px-5 gap-3 flex justify-between items-center",children:[(0,a.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M6.5 13C4.68333 13 3.146 12.3707 1.888 11.112C0.63 9.85333 0.000666667 8.316 0 6.5C0 4.68333 0.629333 3.146 1.888 1.888C3.14667 0.63 4.684 0.000666667 6.5 0C8.31667 0 9.854 0.629333 11.112 1.888C12.37 3.14667 12.9993 4.684 13 6.5C13 7.23333 12.8833 7.925 12.65 8.575C12.4167 9.225 12.1 9.8 11.7 10.3L17.3 15.9C17.4833 16.0833 17.575 16.3167 17.575 16.6C17.575 16.8833 17.4833 17.1167 17.3 17.3C17.1167 17.4833 16.8833 17.575 16.6 17.575C16.3167 17.575 16.0833 17.4833 15.9 17.3L10.3 11.7C9.8 12.1 9.225 12.4167 8.575 12.65C7.925 12.8833 7.23333 13 6.5 13ZM6.5 11C7.75 11 8.81267 10.5623 9.688 9.687C10.5633 8.81167 11.0007 7.74933 11 6.5C11 5.25 10.5623 4.18733 9.687 3.312C8.81167 2.43667 7.74933 1.99933 6.5 2C5.25 2 4.18733 2.43767 3.312 3.313C2.43667 4.18833 1.99933 5.25067 2 6.5C2 7.75 2.43767 8.81267 3.313 9.688C4.18833 10.5633 5.25067 11.0007 6.5 11Z",fill:"#808080"})}),(0,a.jsx)("input",{className:"w-full text-[#000] text-[16px] font-[400] py-3 bg-transparent .placeholder-{#808080} outline-none rounded-[10px]",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0431\u0440\u0438\u0444\u0430. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \xab\u0411\u0440\u0438\u0444 129\xbb, \xab129\xbb, \xab\u0411\u0440\u0438\u0444 \u2116129\xbb, \xab\u0411\u0440\u0438\u0444 #129\xbb \u0431\u0435\u0437 \u043a\u0430\u0432\u044b\u0447\u0435\u043a",value:f,onChange:e=>g(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex w-full gap-4 justify-start",children:[(0,a.jsx)(s,{value:null===O||void 0===O?void 0:O.year,onChange:e=>S({...O,year:null===e||void 0===e?void 0:e.Name}),defOpt:E.year.defOpt,options:E.year.options}),(0,a.jsx)(s,{value:null===O||void 0===O?void 0:O.client,onChange:e=>S({...O,client:null===e||void 0===e?void 0:e.Oid}),defOpt:E.client.defOpt,options:E.client.options}),(0,a.jsx)(s,{value:null===O||void 0===O?void 0:O.manager,onChange:e=>S({...O,manager:null===e||void 0===e?void 0:e.Oid}),defOpt:y.manager.defOpt,options:y.manager.options})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("p",{className:"text-[14px] font-normal leading-[1.3] text-[#808080]",children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c:"}),(0,a.jsx)("button",{className:"".concat(10==p&&"underline "," text-[14px] font-normal leading-[1.3] text-[#808080] cursor-pointer"),onClick:()=>{x(10),h(1)},children:"10"}),(0,a.jsx)("button",{className:"".concat(50==p&&"underline "," text-[14px] font-normal leading-[1.3] text-[#808080] cursor-pointer"),onClick:()=>{x(50),h(1)},children:"50"}),(0,a.jsxs)("button",{className:"".concat(100==p&&"underline "," text-[14px] font-normal leading-[1.3] text-[#808080] cursor-pointer"),onClick:()=>{x(100),h(1)},children:[" ","100"]})]})]}),(0,a.jsxs)("div",{className:"mt-5 mb-10",children:[(0,a.jsx)("button",{onClick:()=>L(),className:"mr-5 text-[14px] font-semibold leading-[1.3] text-[#1A1A1A] cursor-pointer",children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435"}),(0,a.jsx)("button",{className:"text-[14px] font-normal leading-[1.3] text-[#808080] cursor-pointer",onClick:()=>{(async()=>{S({year:"",client:"",manager:"",filter:""}),l(!0),c.b.post("/api/briefs?limit="+p+"&page="+m,{}).then((e=>{var o,t,n;console.log(null===(o=e.data)||void 0===o?void 0:o.data),i(null===(t=e.data)||void 0===t?void 0:t.data),d(null===(n=e.data)||void 0===n?void 0:n.meta),b(e),l(!1)})).catch((e=>{console.log(e),l(!1)}))})()},children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u044b"})]}),e?(0,a.jsx)("div",{className:"max-h-[570px]",children:(0,a.jsx)(v.Z,{})}):(0,a.jsxs)("div",{className:"min-w-[80vh]",children:[o.length>0?(0,a.jsx)(r,{page:m,limit:p,data:o,meta:n}):0===o.length?(0,a.jsx)("div",{className:"w-full text-[14px] text-center py-[22px] border border-solid border-[#EBEBEB] rounded-[5px]",children:"\u041d\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430"}):(0,a.jsx)("div",{className:"w-full text-[14px] text-center py-[22px] border border-solid border-[#EBEBEB] rounded-[5px]",children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f"}),(0,a.jsx)(u.Z,{onChange:e=>{h(e)},meta:n})]})]})})})}},393:(e,l,o)=>{o.d(l,{b:()=>n});var t=o(294),i=o(703);const n=t.Z.create({baseURL:"http://216.250.8.93:8092/",timeout:1e5,headers:{Authorization:"Bearer "+(0,i.r)(),Accept:"application/json","Content-Type":"multipart/form-data; boundary=<calculated when request is sent>"}})},703:(e,l,o)=>{o.d(l,{bg:()=>t,r:()=>i});const t=()=>{if(localStorage.getItem("profile")){if(JSON.parse(localStorage.getItem("profile")).token)return!0;localStorage.removeItem("profile")}return!1},i=()=>{if(JSON.parse(localStorage.getItem("profile")))return JSON.parse(localStorage.getItem("profile")).token}}}]);
//# sourceMappingURL=557.ad5c83ea.chunk.js.map